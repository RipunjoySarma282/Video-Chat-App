<%- include('partials/header'); %>  
  <link rel="stylesheet" href="landing.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 fixed-top">
      <div class="container">
        <p class="navbar-brand"><span class="header">Video Chat App </span></p>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navmenu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navmenu">
          <ul class="navbar-nav ms-auto">
            <% if(user){ %>
              <li class="nav-item welcome">
                  Welcome, <%= user.username %>
              </li>
              <li class="nav-item">
                <a href="/logout" class="log_in p-2">Log Out</a>
              </li>
            <% }else{ %>
              <li class="nav-item">
                <a href="/signup" class="p-2 log_in">Sign Up</a>
              </li> 
              <li class="nav-item">
                <a href="/login" class="p-2 log_in">Log In</a>
              </li>
            <% } %>
          </ul>
        </div>
      </div>
    </nav>

    <section class="p-4 pb-3">
      <div class="container p-5 mt-4">
        <div class="row text-center g-4">
          <div class="col-md p-4">
            <div class="card bg-dark text-light">
              <div class="card-body text-center">
                <div class="h1 mb-3">
                  <img src="./images/createroom/create.jpg" class="img-fluid">
                </div>
                    <a href="/room" class="btn btn-light btn-lg" >Create Room</a>
              </div>
            </div>
          </div>
          <div class="col-md p-4">
            <div class="card bg-dark text-light">
              <div class="card-body text-center">
                <div class="h1 mb-3">
                    <img src="./images/joinroom/People meeting online via video conference.jpg" class="img-fluid">
                </div>
                    <button class="btn btn-light btn-lg" data-bs-toggle="modal" data-bs-target="#joinroom">Join Room</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center position-absolute p-3">
      <div class="container">
        <p class="footer_p">Copyright &copy; 2021 Video Chat App. All rights reserved.</p>
      </div>
    </footer>

    <!-- modal -->
    <div
      class="modal fade"
      id="joinroom">

      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="enrollLabel">Join The Room</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <form>
            <div class="modal-body">
              <div class="mb-3">
                <label for="roomid" class="col-form-label">Room Id</label>
                <input type="text" class="form-control" name="roomid" placeholder="paste the room id here to join the chat"/>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal">Close</button>
              
              <button class="btn btn-primary" data-bs-dismiss="modal">Join</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      const form=document.querySelector('form');

      form.addEventListener('submit',async(e)=>{
        e.preventDefault();

        const roomid=form.roomid.value;
        window.location.assign('/'+roomid);
      });
    </script>
<%- include('partials/footer'); %>